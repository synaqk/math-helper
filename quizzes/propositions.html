<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logic & Truth Table Quiz</title>
    <style>
        :root {
            --bg-color: #f4f4f9;
            --font-color: #333;
            --primary-color: #4a4a88;
            --light-gray: #ddd;
            --border-radius: 8px;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --card-bg: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
        }

        h1, h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        h1 {
            text-align: center;
        }

        section {
            background-color: var(--card-bg);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .question, .truth-table-question {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .question:last-child, .truth-table-question:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .radio-group label {
            margin-right: 15px;
            cursor: pointer;
        }

        .result-indicator {
            font-size: 1.5em;
            font-weight: bold;
        }

        .correct {
            color: var(--correct-color);
        }

        .incorrect {
            color: var(--incorrect-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            text-align: center;
        }

        th, td {
            border: 1px solid var(--light-gray);
            padding: 12px;
        }

        th {
            background-color: #e9e9f2;
        }

        code {
            font-family: "SF Mono", "Consolas", "Menlo", monospace;
            background-color: #e9e9f2;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 1.1em;
        }

        select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid var(--light-gray);
            width: 60px;
            font-weight: bold;
            text-align: center;
        }

        .controls {
            text-align: center;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s;
            margin: 0 10px;
        }

        button:hover {
            background-color: #383866;
        }

        .symbol-key {
            font-size: 0.9em;
            background-color: #e9e9f2;
            padding: 10px;
            border-radius: var(--border-radius);
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Logic & Truth Table Quiz</h1>

    <section id="symbol-key">
        <h2>Key</h2>
        <div class="symbol-key">
            <code>¬</code> (NOT),
            <code>∧</code> (AND),
            <code>∨</code> (OR),
            <code>→</code> (IF...THEN),
            <code>↔</code> (IFF),
            <code>⊕</code> (XOR)
        </div>
    </section>

    <section id="basic-logic">
        <h2>Part 1: Basic Logic</h2>
        <div id="basic-logic-questions"></div>
    </section>

    <section id="truth-tables">
        <h2>Part 2: Complete the Truth Tables</h2>
        <div id="truth-table-questions"></div>
    </section>

    <div class="controls">
        <button id="check-btn">Check Answers</button>
        <button id="reset-btn">New Quiz</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA ---

        // Part 1: Basic logical operations
        const basicOps = [
            { name: '¬ p', func: (p, q) => !p },
            { name: 'p ∧ q', func: (p, q) => p && q },
            { name: 'p ∨ q', func: (p, q) => p || q },
            { name: 'p → q', func: (p, q) => !p || q },
            { name: 'p ↔ q', func: (p, q) => p === q }
        ];

        // Part 2: More complex propositions for truth tables
        const propositions = [
            { text: 'p → q', func: (p, q) => !p || q },
            { text: 'p ↔ q', func: (p, q) => p === q },
            { text: 'p ⊕ q', func: (p, q) => p !== q },
            { text: '¬(p ∧ q)', func: (p, q) => !(p && q) },
            { text: '¬p ∨ ¬q', func: (p, q) => !p || !q },
            { text: '(p → q) ∧ p', func: (p, q) => (!p || q) && p },
            { text: '¬(p → q)', func: (p, q) => p && !q },
            { text: '(p ∨ q) ↔ p', func: (p, q) => (p || q) === p }, // Absorption Law
            { text: '(p → q) ↔ (¬q → ¬p)', func: (p, q) => ((!p || q) === (q || !p)) }, // Contrapositive
            { text: '¬(p ∧ q) ↔ (¬p ∨ ¬q)', func: (p, q) => (!(p && q) === (!p || !q)) } // De Morgan's Law
        ];

        // --- DOM ELEMENTS ---
        const basicLogicContainer = document.getElementById('basic-logic-questions');
        const truthTableContainer = document.getElementById('truth-table-questions');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');

        // --- FUNCTIONS ---

        /**
         * Shuffles an array in place.
         * @param {Array} array The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates and displays a new quiz.
         */
        function generateQuiz() {
            // Clear previous questions and results
            basicLogicContainer.innerHTML = '';
            truthTableContainer.innerHTML = '';

            // Part 1: Generate 5 basic logic questions
            for (let i = 0; i < 5; i++) {
                const op = basicOps[Math.floor(Math.random() * basicOps.length)];
                const p = Math.random() < 0.5;
                const q = Math.random() < 0.5;
                const answer = op.func(p, q);

                // Create question elements
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.dataset.answer = answer;

                const pValueText = op.name.includes('¬ p') ? `p is ${p}` : `p is ${p} and q is ${q}`;

                questionDiv.innerHTML = `
                        <div class="question-text">
                            <span>${i + 1}. If ${pValueText}, what is '<b>${op.name}</b>'?</span>
                            <span class="result-indicator"></span>
                        </div>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="q1-${i}" value="true"> True
                            </label>
                            <label>
                                <input type="radio" name="q1-${i}" value="false"> False
                            </label>
                        </div>
                    `;
                basicLogicContainer.appendChild(questionDiv);
            }

            // Part 2: Generate 5 truth table questions
            shuffleArray(propositions); // Ensure random, non-repeating questions
            const selectedPropositions = propositions.slice(0, 5);

            selectedPropositions.forEach((prop, i) => {
                const tableDiv = document.createElement('div');
                tableDiv.className = 'truth-table-question';

                const rows = [
                    { p: true, q: true },
                    { p: true, q: false },
                    { p: false, q: true },
                    { p: false, q: false }
                ];

                let tableRowsHtml = '';
                rows.forEach(row => {
                    const answer = prop.func(row.p, row.q);
                    tableRowsHtml += `
                            <tr data-answer="${answer}">
                                <td>${row.p ? 'T' : 'F'}</td>
                                <td>${row.q ? 'T' : 'F'}</td>
                                <td>
                                    <select>
                                        <option value="">?</option>
                                        <option value="true">T</option>
                                        <option value="false">F</option>
                                    </select>
                                </td>
                            </tr>
                        `;
                });

                tableDiv.innerHTML = `
                        <div class="question-text">
                            <span>${i + 1}. Complete the truth table for the proposition: <code>${prop.text}</code></span>
                             <span class="result-indicator"></span>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>p</th>
                                    <th>q</th>
                                    <th>${prop.text}</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tableRowsHtml}
                            </tbody>
                        </table>
                    `;
                truthTableContainer.appendChild(tableDiv);
            });
        }

        /**
         * Checks the user's answers and displays the results.
         */
        function checkAnswers() {
            // Part 1 Check
            const basicQuestions = basicLogicContainer.querySelectorAll('.question');
            basicQuestions.forEach(q => {
                const correctAnswer = q.dataset.answer;
                const selectedRadio = q.querySelector('input[type="radio"]:checked');
                const indicator = q.querySelector('.result-indicator');

                if (!selectedRadio) {
                    indicator.textContent = '✗';
                    indicator.className = 'result-indicator incorrect';
                    return;
                }

                if (selectedRadio.value === correctAnswer) {
                    indicator.textContent = '✓';
                    indicator.className = 'result-indicator correct';
                } else {
                    indicator.textContent = '✗';
                    indicator.className = 'result-indicator incorrect';
                }
            });

            // Part 2 Check
            const truthTableQuestions = truthTableContainer.querySelectorAll('.truth-table-question');
            truthTableQuestions.forEach(q => {
                const rows = q.querySelectorAll('tbody tr');
                let isTableCorrect = true;

                rows.forEach(row => {
                    const correctAnswer = row.dataset.answer;
                    const userSelect = row.querySelector('select');

                    if (userSelect.value !== correctAnswer) {
                        isTableCorrect = false;
                    }
                });

                const indicator = q.querySelector('.result-indicator');
                if (isTableCorrect) {
                    indicator.textContent = '✓';
                    indicator.className = 'result-indicator correct';
                } else {
                    indicator.textContent = '✗';
                    indicator.className = 'result-indicator incorrect';
                }
            });
        }

        // --- EVENT LISTENERS ---
        checkBtn.addEventListener('click', checkAnswers);
        resetBtn.addEventListener('click', generateQuiz);

        // --- INITIALIZATION ---
        generateQuiz();
    });
</script>

</body>
</html>